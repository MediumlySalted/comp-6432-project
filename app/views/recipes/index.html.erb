
<nav class="navbar navbar-expand-lg bg-body">
  <div class="container-fluid">
    <%= link_to "Home", home_path, class: "navbar-brand ms-3 me-4"%>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
    <!-- Navigation Buttons -->
      <ul class="navbar-nav me-5">
        <li class="nav-item me-2"><%= link_to "Food", food_path, class: "btn-nav" %></li>
        <li class="nav-item"><%= link_to "Cocktails", cocktails_path, class: "btn-nav" %></li>
      </ul>
    <!-- Tags -->
      <ul class="navbar-nav me-5">
      <% if @tags %>
      <span class="navbar-text me-2">Filtering by: </span>
        <% @tags.each do | tag | %>
          <li class="nav-item align-content-center"><%= link_to "#{tag.name}", "#{recipes_path(toggle_tag_in_params(tag.id))}", class: "btn-filter", style: "background-color: #{tag.color}; border-color: #{tag.color}" %></li>
        <% end %>
      <% end %>
      </ul>
    <!-- Search Bar & Btns -->
      <form class="d-flex ms-5 me-5" role="search">
        <button class="btn btn-outline-success">Search</button>
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <div class="btn-group dropend">
          <button class="btn btn-outline-secondary dropdown-toggle">Filter</button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Name</a></li>
            <li><a class="dropdown-item" href="#">Tag</a></li>
            <li><a class="dropdown-item" href="#">Ingredient</a></li>
          </ul>
        </div>
      </form>
    </div>
    <!-- Sign in/out -->
      <ul class="navbar-nav">
      <% if user_signed_in? %>
        <li class="nav-item"><%= link_to "Hi, #{current_user.email}", edit_user_registration_path, class: "nav-link #{active_class(edit_user_registration_path)} btn btn-link" %></li>
        <li class="nav-item"><%= button_to 'Sign Out', destroy_user_session_path, method: :delete, data: { turbo: false }, class: 'nav-link btn btn-link' %></li>
      <% else %>
        <li class="nav-item"><%= link_to 'Sign In', new_user_session_path, class: "nav-link #{active_class(new_user_session_path)} btn btn-link" %></li>
        <li class="nav-item"><%= link_to 'Sign Up', new_user_registration_path, class: "nav-link #{active_class(new_user_registration_path)} btn btn-link" %></li>
      <% end %>
      </ul>
  </div>
</nav>

<br>

<div class="container">
  <div class="row row-cols-auto justify-content-center">
  <% @recipes.each do | recipe | %>
    <div class="col mb-4">
      <div class="card shadow p-4 bg-body rounded h-100 w-100">
        <div class="card-body">
          <h2 class="card-title" style="margin-bottom: .25rem;"><%= recipe.name %></h2>
          <!-- Tags -->
          <div>
          <% recipe.tags.each do | tag | %>
            <%= link_to "#{tag.name}", "#{recipes_path(toggle_tag_in_params(tag.id))}", class: "btn-tag", style: "background-color: #{tag.color}; border-color: #{tag.color}" %>
          <% end %>
          </div>
          <!-- Ingredients -->
          <h5 class="card-text">Ingredients</h5>
          <ul>
            <% recipe.ingredients.each do | ingredient | %>
              <li><p class="card-text"><%= ingredient %></p></li>
            <% end %>
          </ul>
          <!-- Directions -->
          <h5 class="card-text">Directions</h5>
          <div>
            <% directions = recipe.directions.split("\n") %>
            <% directions.each do | direction | %>
              <p class="card-text" style="margin: 0; padding: 0;"><%= direction %></p>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
  </div>
</div>
